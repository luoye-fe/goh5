webpackJsonp([0],[
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var dpi = __webpack_require__(1);

	var load = __webpack_require__(2);

	var GoH5 = __webpack_require__(5);



/***/ },
/* 1 */
/***/ function(module, exports) {

	'use strict';
	var clientW = document.body.clientWidth;
	var percent = clientW / 320;
	document.getElementById('GoH5ViewPort').setAttribute('content','width=320, initial-scale='+ percent +', maximum-scale='+ percent +', user-scalable=no');

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var utils = __webpack_require__(3);
	var Event = __webpack_require__(4);

	var loadImg = function(src, callback) {
	    var Tag = document.createElement('img');
	    Tag.style.display = 'none';
	    Tag.src = src;
	    document.body.appendChild(Tag);
	    Tag.onload = Tag.onerror = function() {
	        document.body.removeChild(Tag);
	        if (callback) {
	            callback && callback();
	        }
	    };
	}

	var imgArr = [];
	utils.$('[data-src]').each(function(index, item) {
	    imgArr.push(utils.$(item).attr('data-src'));
	})
	imgArr = utils.unduplicate(imgArr);

	var loadedImgLen = 0;
	imgArr.forEach(function(item) {
	    loadImg(item, function() {
	        loadedImgLen++;
	        Event.trigger('loading', (loadedImgLen / imgArr.length * 100).toFixed(0) + '%');
	        utils.$('.loading_con em').html((loadedImgLen / imgArr.length * 100).toFixed(0) + '%');
	        if (loadedImgLen === imgArr.length) {
	            utils.$('[data-src]').each(function(index, item) {
	                utils.$(item).attr('src', utils.$(item).attr('data-src'));
	            })
	            Event.trigger('loaded');
	            utils.$('.loading_con').addClass('fedeOut');
	            setTimeout(function() {
	                utils.$('.loading_con').css('display', 'none');
	            }, 400);
	        }
	    });
	})

/***/ },
/* 3 */
/***/ function(module, exports) {

	'use strict';

	var utils = {};

	utils.$ = new Swiper().$;

	utils.setCookie = function(name, value, minute) {
	    var date = new Date();
	    if (minute === undefined) {
	        minute = 2;
	    }
	    date.setTime(date.getTime() + (minute * 60 * 1000));
	    var expires = "expires=" + date.toUTCString();
	    document.cookie = name + "=" + value + "; " + expires;
	};

	utils.getCookie = function(name) {
	    var cookies = {};
	    var cookiesArr = document.cookie.split(';');
	    for (var i = 0; i < cookiesArr.length; i++) {
	        var _arr = cookiesArr[i].split('=');
	        cookies[_arr[0]] = _arr[1];
	    }
	    return cookies[name];
	};

	utils.delCookie = function(name) {
	    this.setCookie(name, "", -1);
	};

	utils.styleJson = function(styleString) {
	    var result = {};
	    var _arr = styleString.split(';');
	    for (var i = 0; i < _arr.length; i++) {
	        if (_arr[i] !== '') {
	            var _current = _arr[i].split(':');
	            result[_current[0]] = _current[1];
	        }
	    }
	    return result;
	};

	utils.viewData = function() {
	    var w = win,
	        body = doc.body,
	        dd = doc.documentElement,
	        W = w.innerWidth || dd.clientWidth || body.clientWidth || 0,
	        H = w.innerHeight || dd.clientHeight || body.clientHeight || 0;
	    return {
	        "scrollTop": body.scrollTop || dd.scrollTop || w.pageYOffset,
	        "scrollLeft": body.scrollLeft || dd.scrollLeft || w.pageXOffset,
	        "documentWidth": Math.max(body.scrollWidth, dd.scrollWidth || 0),
	        "documentHeight": Math.max(body.scrollHeight, dd.scrollHeight || 0, H),
	        "viewWidth": W,
	        "viewHeight": H
	    };
	};

	utils.unduplicate = function(arr) {
	    var obj = {},
	        i = 0,
	        len = 0;
	    if (Array.isArray(arr) && arr.length > 0) {
	        len = arr.length;
	        for (i = 0; i < len; i += 1) {
	            obj[arr[i]] = arr[i];
	        }
	        return Object.keys(obj);
	    }
	    return [];
	}

	module.exports = utils;

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	/*
	 ************************************************
	 * @author:luoye https://github.com/luoye-fe
	 * @desc:event on/trigger/one/off
	 * @time:2015.01.16
	 ************************************************
	 */
	(function(global, factory) {
	     true ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.Event = factory();
	})(this, function() {
	    var e = {};
	    var _each = function(arr, fn) {
	        var ret;
	        for (var i = 0; i < arr.length; i++) {
	            var n = arr[i];
	            ret = fn.call(n, i, n)
	        }
	        return ret;
	    }

	    e.cache = {};
	    e.offlineCache = [];
	    e.isOne = false;
	    e.on = function(key, fn) {
	        var _this = this;
	        if (this.cache[key] === undefined) {
	            this.cache[key] = [];
	            this.cache[key].push(fn);
	        } else {
	            this.cache[key].push(fn);
	        }
	        var _current = [];
	        _each(this.offlineCache, function(index, item) {
	            if (item[key] !== undefined) {
	                var _obj = {};
	                _obj[key] = item[key];
	                _current.push(_obj);
	            }
	        })
	        if (_current.length > 0) {
	            if (_this.isOne) {
	                e.trigger(key, _current[_current.length - 1][key]);
	            } else {
	                _each(_current, function(index, item) {
	                    e.trigger(key, item[key]);
	                })
	            }
	        }
	    }
	    e.one = function(key, fn) {
	        this.isOne = true;
	        this.on(key, fn);
	        this.isOne = false;
	    }
	    e.off = function(key, fn) {
	        if (this.cache[key]) {
	            if (fn) {
	                fn && fn();
	                this.cache[key] = [];
	            } else {
	                this.cache[key] = [];
	            }
	        }
	        this.offlineCache = [];
	    }
	    e.trigger = function(key, value) {
	        var _this = this;
	        var stack = this.cache[key];
	        if (!stack || !stack.length) {
	            var _current = {};
	            _current[key] = value;
	            this.offlineCache.push(_current);
	            return;
	        } else {
	            if (this.isOne) {
	                stack[0].call(_this, value);
	                this.cache[key] = [];
	            } else {
	                return _each(stack, function() {
	                    return this.call(_this, value);
	                })
	            }
	        }
	    }
	    return e;
	})


/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';

	var Swiper = __webpack_require__(6);
	var utils = __webpack_require__(3);
	var ani = __webpack_require__(7);

	var defaultConfig = window.defaultConfig;

	if (defaultConfig.direction == 'horizontal') {
	    utils.$('#arrow').addClass('horizontal_arrow');
	} else if (defaultConfig.direction == 'horizontal') {
	    utils.$('#arrow').addClass('vertical_arrow');
	}


	var isInited = false; // swiper的bug，不是初始页的时候会出发slidechangeend事件
	var setConfig = {
	    direction: defaultConfig.direction,
	    loop: defaultConfig.loop,
	    effect: defaultConfig.effect,
	    noSwiping: true,
	    noSwipingClass: 'swipe-no-swiping',
	    onInit: function(swiper){
	    	ani.swiperAnimateCache(function(){
		    	ani.swiperAnimate(swiper);
		    	isInited = true;
	    	});
	    },
	    onSlideChangeEnd: function(swiper){
	    	if(isInited){
	    		ani.swiperAnimate(swiper);    		
	    	}
	    }
	};

	// 初始页面
	setConfig.initialSlide = defaultConfig.autoBackPrePage ? (utils.getCookie('initialSlide') ? (setConfig.loop ? Number(utils.getCookie('initialSlide')) - 1 : Number(utils.getCookie('initialSlide'))) : 0) : 0;

	var GoH5 = new Swiper('.swiper-container', setConfig);
	GoH5.on('slideChangeEnd', function(swiper) {
		if(defaultConfig.autoBackPrePage){
		    utils.setCookie('initialSlide', swiper.activeIndex, 2);
		}
	})


	// for debug
	window.GoH5 = GoH5;
	window.$ = utils.$;


	module.exports = GoH5;

/***/ },
/* 6 */,
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';

	var utils = __webpack_require__(3);

	var swiperAnimateCache = function(cb) {
	    var cacheLen = 0;
	    utils.$('.ani').each(function(index, item) {
	        if (utils.$(item).children().eq(0).attr('isCached') === null) {
	            cacheLen++;
	            var ani = utils.$(item).children().eq(0)[0].style['animation'] || utils.$(item).children().eq(0)[0].style['-webkit-animation'];
	            var aniCache = ani.replace(/none|forwards|backwords/, 'both').replace(/none|forwards|backwords/g, 'forwards');
	            utils.$(item).children().eq(0).attr('aniCache', aniCache);
	            utils.$(item).children().eq(0).attr('isCached', true);
	            utils.$(item).children().eq(0).css('visibility','hidden');
	            if (utils.$('.ani').length === cacheLen) {
	                cb && cb();
	            }
	        }
	    })
	}

	var swiperAnimate = function(swiper) {
	    clearSwiperAnimate();
	    var aniEle = swiper.slides[swiper.activeIndex].querySelectorAll(".ani");
	    for (var i = 0; i < aniEle.length; i++) {
	        var aniCache = utils.$(aniEle[i]).children().eq(0).attr('aniCache');
	        utils.$(aniEle[i]).children().eq(0).css('visibility','visible');
	        utils.$(aniEle[i]).children().eq(0).css('animation', aniCache);
	        utils.$(aniEle[i]).children().eq(0).css('-webkit-animation', aniCache);
	    }
	}

	var clearSwiperAnimate = function() {
	    utils.$('.ani').each(function(index, item) {
	        utils.$(item).children().eq(0).css('animation', '');
	        utils.$(item).children().eq(0).css('-webkit-animation', '');
	        utils.$(item).children().eq(0).css('visibility','hidden');
	    })
	}

	module.exports = {
	    swiperAnimateCache: swiperAnimateCache,
	    swiperAnimate: swiperAnimate
	}

/***/ }
]);